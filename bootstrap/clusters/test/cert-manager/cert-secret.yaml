apiVersion: external-secrets.io/v1
kind: ExternalSecret
metadata:
  name: "cert-manager-issuer-external-secret"
  # labels and annotations are copied over to the
  # secret that will be created
spec:
  # SecretStoreRef defines which SecretStore to use when fetching the secret data
  secretStoreRef:
    name: vault-backend
    kind: ClusterSecretStore
  target:
    name: cert-manager-certs
    creationPolicy: Owner
  data:
    - secretKey: ca.key
      remoteRef:
        key: cluster-issuer-cert
        property: ca.key
        decodingStrategy: Base64
    - secretKey: ca.crt
      remoteRef:
        key: cluster-issuer-cert
        property: ca.crt
        decodingStrategy: Base64